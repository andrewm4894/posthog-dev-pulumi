# PostHog Development VMs Configuration
# Edit this file and run `pulumi up` to apply changes

# Default settings (applied to all VMs unless overridden)
defaults:
  machine_type: e2-standard-8
  disk_size_gb: 100
  posthog_branch: master
  enable_minimal_mode: false

# Monitoring configuration
monitoring:
  # GCP Ops Agent - for Cloud Monitoring/Logging integration
  ops_agent_enabled: true

  # Netdata - for real-time monitoring dashboard
  netdata_enabled: true
  netdata_claim_url: https://app.netdata.cloud
  # IMPORTANT: Set your Netdata room and token via Pulumi config:
  #   pulumi config set netdataClaimRooms "YOUR_ROOM_ID"
  #   pulumi config set --secret netdataClaimToken "YOUR_TOKEN"

# Claude Code configuration
claude_code:
  # Enable Claude Code installation on VMs
  enabled: true
  # IMPORTANT: Store the API key as a Pulumi secret:
  #   pulumi config set --secret anthropicApiKey "YOUR_API_KEY"

# Chrome Remote Desktop configuration
remote_desktop:
  # Enable XFCE desktop + Chrome Remote Desktop
  enabled: true
  # IMPORTANT: Store the password as a Pulumi secret (for sudo in desktop session):
  #   pulumi config set --secret rdpPassword "YourSecurePassword123"
  # Setup: SSH to VM, run the command from https://remotedesktop.google.com/headless
  # Then connect via: https://remotedesktop.google.com/access

# OpenAI Codex CLI configuration
codex_cli:
  # Enable Codex CLI installation on VMs
  enabled: true
  # IMPORTANT: Store the API key as a Pulumi secret:
  #   pulumi config set --secret openaiApiKey "YOUR_API_KEY"

# VM definitions
# Uncomment and modify to create VMs
vms:
  - name: posthog-master
    description: "PostHog master branch"
    # posthog_branch: master  # uses default

  # - name: posthog-feat-llma-bool-evals-with-na
  #   description: "PostHog feature branch - LLM bool evals with NA"
  #   posthog_branch: feat/llma-bool-evals-with-na

  # Example: PR review VM
  # - name: posthog-pr-1234
  #   description: "PR #1234 review"
  #   posthog_branch: pr-1234-branch
